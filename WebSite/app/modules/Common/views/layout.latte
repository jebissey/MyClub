<!DOCTYPE html>
<html lang="fr" class="min-vh-100">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <title>{block title}MyClub{/block}</title>
    {php Tracy\Debugger::renderLoader()}
    <style>
        .content-wrapper {
            position: relative;
            min-height: 100%;
        }

        .content-wrapper::before {
            content: "";
            background-image: url('/app/images/logo.png');
            background-repeat: no-repeat;
            background-position: center center;
            background-size: 50%;
            opacity: 0.2;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            /* Valeur négative pour être sous le contenu */
        }

        .modal {
            z-index: 1055 !important;
            /* Valeur par défaut de Bootstrap */
        }

        .modal-backdrop {
            z-index: 1050 !important;
            /* Valeur par défaut de Bootstrap */
        }

        #saveIndicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: none;
            background-color: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 1050;
            cursor: pointer;
            transition: transform 0.2s;
        }

        #saveIndicator:hover {
            transform: scale(1.1);
        }

        #saveIndicator i {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            color: #0d6efd;
        }

        .attribute-badge {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 5px;
            border-radius: 4px;
            cursor: help;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .double-strike {
            text-decoration-line: line-through;
            text-decoration-style: double;
        }

        nav.navbar .navbar-nav .nav-link {
        padding-top: 0.1rem;
        padding-bottom: 0.1rem;
        }

        .img-left {
            float: left !important;
            margin: 0 15px 10px 0 !important;
            max-width: 100%;
            height: auto;
        }

        .img-right {
            float: right !important;
            margin: 0 0 10px 15px !important;
            max-width: 100%;
            height: auto;
        }

        .img-center {
            display: block !important;
            margin: 10px auto !important;
            float: none !important;
            max-width: 100%;
            height: auto;
        }
    </style>
    {block head}{/block}
</head>

<body class="d-flex flex-column min-vh-100">
    {if isset($productionSiteUrl)}
        <div class="alert alert-danger alert-dismissible fade show m-0 rounded-0 text-center py-3" role="alert">
            <h2><i class="bi bi-exclamation-triangle-fill"></i> ATTENTION : Site de test</h2>
            Vous êtes sur un environnement de test. 
            <a href="{$productionSiteUrl}" class="alert-link fw-bold">Accéder au site de production</a>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {/if}
    {if isset($memberAlert)}
        <div class="alert alert-danger alert-dismissible fade show m-0 rounded-0 text-center py-3" role="alert">
            <h2><i class="bi bi-exclamation-triangle-fill"></i> {$memberAlert}</h2>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {/if}

    <div class="toast-container position-fixed top-0 end-0 p-3" id="toastContainer"></div>

    <div class="content-wrapper d-flex flex-column min-vh-100">
        <main class="flex-grow-1">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
                {block navbar}{/block}
            </nav>

            <div class="container-fluid">
                {block content}{/block}
                <div id="saveIndicator" title="Penser à enregistrer les modifications">
                    <i class="bi bi-save"></i>
                </div>
            </div>
        </main>

        <footer class="bg-dark text-white">
            <div class="container-fluid">
                <p class="mb-0">
                    <a href ="https://github.com/jebissey/MyClub/releases">V{$currentVersion}</a> &#169; JEB 
                    <a href="/legal/notice">Mentions légales</a>
                    <a href="https://myclub.alwaysdata.net/navbar/show/article/28" target="_blank">Tutoriels</a>
                </p>
            </div>
        </footer>
    </div>
            
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/app/js/layout.js"></script>
    {block scripts}{/block}
</body>
</html>
